<div class="admin-container">
    <div class="admin-header">
        <h1>Manage Users</h1>
        <a href="/admin/dashboard" class="btn-secondary">Back to Dashboard</a>
    </div>

    <div class="table-responsive">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(user=> { %>
                    <tr>
                        <td>
                            <%= user.name %>
                        </td>
                        <td>
                            <%= user.email %>
                        </td>
                        <td>
                            <%= user.mobile %>
                        </td>
                        <td>
                            <span class="badge <%= user.isAdmin ? 'badge-admin' : 'badge-user' %>">
                                <%= user.isAdmin ? 'Admin' : 'User' %>
                            </span>
                        </td>
                        <td class="actions-cell">
                            <% if (!user.isAdmin) { %>
                                <form action="/admin/users/<%= user._id %>/make-admin?_method=PUT" method="POST"
                                    class="inline-form">
                                    <button type="submit" class="btn-icon btn-promote" title="Make Admin"
                                        onclick="return confirm('Are you sure you want to make this user an admin?')">
                                        Make Admin
                                    </button>
                                </form>
                                <% } %>

                                    <form action="/admin/users/<%= user._id %>?_method=DELETE" method="POST"
                                        class="inline-form">
                                        <button type="submit" class="btn-icon btn-delete" title="Delete User"
                                            onclick="return confirm('Are you sure you want to delete this user?')">
                                            Delete
                                        </button>
                                    </form>
                        </td>
                    </tr>
                    <% }); %>
            </tbody>
        </table>
    </div>
</div>

<style>
    .badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.85rem;
        font-weight: 500;
    }

    .badge-admin {
        background-color: #e3f2fd;
        color: #1976d2;
    }

    .badge-user {
        background-color: #f5f5f5;
        color: #616161;
    }

    .btn-promote {
        background-color: #4caf50;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 5px;
    }

    .btn-delete {
        background-color: #f44336;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }

    .inline-form {
        display: inline-block;
    }
</style>